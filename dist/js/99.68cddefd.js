"use strict";(self["webpackChunkcqxt_manage"]=self["webpackChunkcqxt_manage"]||[]).push([[99],{4697:function(e,r,a){var n;a.d(r,{w:function(){return n}}),function(e){e["Error"]="/404",e["Signin"]="/sign-in",e["SignUp"]="/sign-up",e["Cqxtcontainer"]="/",e["MySpace"]="/my-space"}(n||(n={}))},7313:function(e,r,a){a.d(r,{Kl:function(){return i},wE:function(){return l}});var n=a(3861);const t=(e,r,a)=>{if(!r)return a(new Error("账号不能为空"));a()},s=(e,r,a)=>{if(!r)return a(new Error("密码不能为空"));a()},i={username:[{validator:t,trigger:"blur"}],password:[{validator:s,trigger:"change"}]},u=async(e,r,a)=>{if(!r)return a(new Error("账号不能为空"));const t=r,s=await n.x.checkUsername(t);if(!s.success)return a(new Error("该账号已被他人使用"));a()},o=async(e,r,a)=>{if(!r)return a(new Error("账号不能为空"));const t=r,s=await n.x.checkEmail(t);if(!s.success)return a(new Error("该邮箱已被使用"));a()},l={email:[{validator:o,required:!0,trigger:"blur"},{type:"email",message:"请输入正确的emali",trigger:["blur","change"]}],name:[{required:!0,trigger:"blur",message:"请输入名字"},{min:3,max:16,message:"名字格式不对",trigger:"blur"}],username:[{validator:u,required:!0,trigger:"blur"},{min:8,max:16,message:"账号应该在8-16位数之间",trigger:"blur"}],password:[{message:"密码不能为空",required:!0,trigger:"blur"},{min:8,max:16,message:"密码应该在8-16位数之间",trigger:"blur"}]}},9359:function(e,r,a){a.d(r,{Z:function(){return i}});a(560);var n=a(4697),t=a(65),s=a(3396);function i(){const{proxy:e}=(0,s.FN)(),r=(0,t.oR)();(0,s.Fl)((()=>r.getters.token));function a(r,a){switch(r){case n.w.SignUp:case n.w.Error:default:e.$router.push({path:a.path});break}}return{routerManager:a}}},6099:function(e,r,a){a.r(r),a.d(r,{default:function(){return h}});var n=a(3396);const t={class:"signin"},s=(0,n._)("header",null,"登入",-1);function i(e,r,a,i,u,o){const l=(0,n.up)("el-input"),c=(0,n.up)("el-form-item"),m=(0,n.up)("el-button"),d=(0,n.up)("el-form");return(0,n.wg)(),(0,n.iD)("div",t,[s,(0,n.Wm)(d,{model:e.user,"status-icon":"",rules:e.SigninRules,ref:"userref","lable-width":"100px",class:"signin-ruleform"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{label:"账号",prop:"username"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{placeholder:"请输入账号",modelValue:e.user.username,"onUpdate:modelValue":r[0]||(r[0]=r=>e.user.username=r),clearable:"",style:{width:"200px"}},null,8,["modelValue"])])),_:1}),(0,n.Wm)(c,{label:"密码",prop:"password"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{placeholder:"请输入密码",modelValue:e.user.password,"onUpdate:modelValue":r[1]||(r[1]=r=>e.user.password=r),"show-password":"",style:{width:"200px"}},null,8,["modelValue"])])),_:1}),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,{type:"primary",onClick:r[2]||(r[2]=r=>e.signin()),color:"#626aef",dark:e.isDark},{default:(0,n.w5)((()=>[(0,n.Uk)("登入")])),_:1},8,["dark"]),(0,n.Wm)(m,{type:"primary",onClick:r[3]||(r[3]=r=>e.loginin()),color:"#626aef",dark:e.isDark},{default:(0,n.w5)((()=>[(0,n.Uk)("注册")])),_:1},8,["dark"])])),_:1})])),_:1},8,["model","rules"])])}var u=a(4870),o=a(7313),l=a(3861),c=a(9359),m=a(4697),d=a(7178),g=a(65),p=(0,n.aZ)({name:"signin",setup(){const e=(0,g.oR)(),{proxy:r}=(0,n.FN)(),{routerManager:a}=(0,c.Z)(),t=(0,u.qj)({username:"",password:""});async function s(){try{await r.$refs["userref"].validate();const n=t.username,s=t.password,i=await l.x.Signin(n,s);i.success?(console.log(i.data.id),e.commit("setUserId",i.data.id),e.commit("setUsername",i.data.username),e.commit("setUserPic",i.data.avator),e.commit("setToken",!0),localStorage.setItem("token",i.data.id),d.z8.success(i.message),a(m.w.Cqxtcontainer,{path:m.w.Cqxtcontainer})):d.z8.error(i.message)}catch(n){console.error(n)}}function i(){a(m.w.SignUp,{path:m.w.SignUp})}return{user:t,signin:s,loginin:i,SigninRules:o.Kl}}}),f=a(89);const w=(0,f.Z)(p,[["render",i]]);var h=w}}]);
//# sourceMappingURL=99.68cddefd.js.map